(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}})();function q(){const t=sessionStorage.getItem("username");if(t){const e=document.getElementById("welcomeText");e&&(d(e),setTimeout(()=>{e.textContent="Welcome",l(e)},1e3),setTimeout(()=>{d(e)},2e3),setTimeout(()=>{e.textContent=`${t}`,l(e)},3e3))}}function l(t){t.style.opacity=0;let e=0;const s=50,r=s/1e3;function n(){e+=r,t.style.opacity=e,e<1&&setTimeout(n,s)}n()}function d(t){t.style.opacity=1;let e=1;const s=50,r=s/1e3;function n(){e-=r,t.style.opacity=e,e>0&&setTimeout(n,s)}n()}function $(){const t=document.querySelector(".stone");if(t){const e=t.style.animation;t.style.animation="none",t.style.animation="increase-brightness 4s forwards",setTimeout(()=>{t.style.animation=e},4e3)}}const O={receivePage:"receive",ponderPage:"ponder",planPage:"plan",actPage:"act",reviewPage:"review",recordPage:"record"};function C(t,e){const s=sessionStorage.getItem("loggedIn")==="true";if(console.log(`loggedIn: ${s}`),s){const o=sessionStorage.getItem("userId");if(console.log(`userId: ${o}`),o){const r=`https://seerstoneapi.onrender.com/inspirations/user_id/${o}/step/${t}`;console.log(`Fetching from URL: ${r}`),fetch(r,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then(n=>{if(console.log(`HTTP status: ${n.status}`),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return n.json()}).then(n=>{console.log(`Data received for ${e}:`,n);const a=document.getElementById(e).querySelector(".content");Array.isArray(n)&&n.length>0?a.innerHTML=n.map(i=>`<p>${i.evidence}</p>`).join(""):a.innerHTML="<p>No data found</p>"}).catch(n=>{console.error("Error fetching data:",n);const a=document.getElementById(e).querySelector(".content");a.innerHTML="<p>Error loading content</p>"})}else console.error("User ID is not available in session storage")}else console.log("User is not logged in")}function F(){Object.entries(O).forEach(([t,e])=>{C(e,t)})}function B(){const t=document.getElementById("book"),e=document.getElementById("cover");e&&(t.style.zIndex=4,e.style.transform=e.style.transform==="rotateY(-180deg)"?"rotateY(0deg)":"rotateY(-180deg)"),setTimeout(()=>{t.style.zIndex=2;const s=e.children;for(let o=0;o<s.length;o++)s[o].style.display=s[o].style.display==="none"?"block":"none"},500)}function x(){const t=document.getElementById("book"),e=document.getElementById("cover");e&&(setTimeout(()=>{t.style.zIndex=4},600),e.style.transform=e.style.transform==="rotateY(-180deg)"?"rotateY(0deg)":"rotateY(-180deg)"),setTimeout(()=>{t.style.zIndex=2;const s=e.children;for(let o=0;o<s.length;o++)s[o].style.display=s[o].style.display==="none"?"block":"none"},1e3)}function S(){const t=document.getElementById("book"),e=document.getElementById("login"),s=document.querySelector(".goRegister");e&&(setTimeout(()=>{t.style.zIndex=4},600),e.style.transform=e.style.transform==="rotateY(-180deg)"?"rotateY(0deg)":"rotateY(-180deg)",setTimeout(()=>{t.style.zIndex=2,e.style.zIndex=e.style.zIndex==="3"?"1":"3"},1e3)),setTimeout(()=>{const o=e.children;for(let r=0;r<o.length;r++)o[r].style.display=o[r].style.display==="none"?"block":"none";s&&(s.style.display="flex",s.style.flexDirection="row")},400)}function E(){const t=document.getElementById("book"),e=document.getElementById("login");e&&(t.style.zIndex=4,e.style.transform=e.style.transform==="rotateY(-180deg)"?"rotateY(0deg)":"rotateY(-180deg)",e.style.zIndex=e.style.zIndex==="3"?"1":"3"),setTimeout(()=>{t.style.zIndex=2;const s=e.children;for(let o=0;o<s.length;o++)s[o].style.display=s[o].style.display==="none"?"block":"none"},500)}function P(){const t=document.getElementById("book"),e=document.getElementById("register");e&&(t.style.zIndex=4,e.style.transform=e.style.transform==="rotateY(-180deg)"?"rotateY(0deg)":"rotateY(-180deg)",e.style.zIndex=e.style.zIndex==="3"?"1":"3"),setTimeout(()=>{t.style.zIndex=2;const s=e.children;for(let o=0;o<s.length;o++)s[o].style.display=s[o].style.display==="none"?"block":"none"},500)}function H(){const t=document.getElementById("book"),e=document.getElementById("register");e&&(t.style.zIndex=4,e.style.transform=e.style.transform==="rotateY(-180deg)"?"rotateY(0deg)":"rotateY(-180deg)",e.style.zIndex=e.style.zIndex==="3"?"1":"3"),setTimeout(()=>{t.style.zIndex=2;const s=e.children;for(let o=0;o<s.length;o++)s[o].style.display=s[o].style.display==="none"?"block":"none"},500)}function v(){const t=document.getElementById("begin"),e=document.getElementById("coverText"),s=sessionStorage.getItem("username");d(e),d(t),e&&s&&(e.textContent=`${s}'s Inspirations`),l(e)}function N(){const t=document.querySelector(".candle"),e=document.querySelector(".book"),s=document.querySelector(".cover"),o=document.querySelector(".login"),r=document.querySelector(".register"),n=document.querySelector(".userPage");e.style.transition="transform 1s ease, top 1s ease, left 1s ease",e.style.transform="none",e.style.top="25vh",e.style.left="15vw",e.style.transformOrigin="top center",t.style.zIndex="5";const a=600;window.innerWidth<a&&(e.style.transform="rotate(0deg)",e.style.top="390px",e.style.left="0vw"),s.style.boxShadow="15px 15px 15px rgba(0, 0, 0, 0.748)",o.style.boxShadow="15px 15px 15px rgba(0, 0, 0, 0.748)",r.style.boxShadow="15px 15px 15px rgba(0, 0, 0, 0.748)",n.style.boxShadow="15px 15px 15px rgba(0, 0, 0, 0.748)"}function W(){const t=document.querySelector(".candle"),e=document.querySelector(".book"),s=document.querySelector(".cover"),o=document.querySelector(".login"),r=document.querySelector(".register"),n=document.querySelector(".userPage"),a=window.innerHeight,i=window.innerWidth,c=e.offsetHeight;if(i<600)e.style.transition="transform 1s ease",e.style.transform="rotate(-90deg)",e.style.top="60%",e.style.left="35%",e.style.transformOrigin="center center";else{const g=a*.8/c,p=20,h=72-e.offsetWidth*g*100/i/2;e.style.transition="transform 1s ease, top 1s ease, left 1s ease",e.style.transform=`scale(${g})`,e.style.top=`${p}vh`,e.style.left=`${h}vw`,t.style.zIndex="2"}s.classList.add("no-shadow"),o.classList.add("no-shadow"),r.classList.add("no-shadow"),n.classList.add("no-shadow")}function D(){const t=document.querySelector(".candle"),e=document.querySelector(".book"),s=document.querySelector(".cover"),o=document.querySelector(".login"),r=document.querySelector(".register"),n=document.querySelector(".userPage"),a=window.innerHeight,i=window.innerWidth,c=e.offsetHeight;if(i<600)e.style.transition="transform 1s ease",e.style.transform="rotate(-90deg)",e.style.top="60%",e.style.left="35%",e.style.transformOrigin="center center";else{const g=a*.8/c,p=20,h=72-e.offsetWidth*g*100/i/2;e.style.transition="transform 0s ease, top 0s ease, left 0s ease",e.style.transform=`scale(${g})`,e.style.top=`${p}vh`,e.style.left=`${h}vw`,t.style.zIndex="2",P(),E(),x()}s.classList.add("no-shadow"),o.classList.add("no-shadow"),r.classList.add("no-shadow"),n.classList.add("no-shadow")}function k(t){const e=["userPage","listenPage","receivePage","ponderPage","planPage","actPage","reviewPage","recordPage"];let s=e.indexOf(t);e.forEach((o,r)=>{const n=document.getElementById(o);n.style.transition="transform 1s",r<s?n.style.transform="rotateY(-180deg)":n.style.transform="rotateY(0deg)",setTimeout(()=>{r<s?n.style.zIndex=r+3:r===s?n.style.zIndex=e.length+3:n.style.zIndex=-(r+3)},300)})}function U(){["userPage","listenPage","receivePage","ponderPage","planPage","actPage","reviewPage","recordPage"].forEach((e,s)=>{const o=document.getElementById(e);o.style.transform="rotateY(0deg)",o.style.zIndex=-s,o.style.transition="transform 0.5s, z-index 0.5s"})}let u=!0;function X(t){if(!u)return;const e=document.getElementById("feather"),s=document.getElementById("feathershadow");e.style.zIndex=10,e.style.left=`${t.clientX-e.clientWidth/2-525}px`,e.style.top=`${t.clientY-e.clientHeight/2+70}px`,e.style.transform="rotateY(-40deg) scaleX(.5) scale(1.5)",s.style.animation="none",s.style.opacity=0}function L(){if(!u)return;const t=document.getElementById("feather"),e=document.getElementById("feathershadow");t.style.left="20px",t.style.top="-20px",t.style.transform="rotate(0deg)",setTimeout(()=>{e.style.opacity=1,e.style.animation="item-flicker .15s infinite alternate"},100)}function A(){u=!1}function j(){u=!0}function V(){const t=sessionStorage.getItem("username"),e=sessionStorage.getItem("userId"),s=sessionStorage.getItem("loggedIn");t||sessionStorage.setItem("username",""),e||sessionStorage.setItem("userId",""),s!=="true"&&s!=="false"&&sessionStorage.setItem("loggedIn","false")}let y;document.addEventListener("mousemove",t=>{u&&(clearTimeout(y),X(t),y=setTimeout(L,2e3))});document.addEventListener("mouseleave",()=>{u&&(clearTimeout(y),y=setTimeout(L,500))});document.addEventListener("DOMContentLoaded",function(){F(),V();const t=document.getElementById("begin"),e=document.querySelector(".smallbutton"),s=document.querySelector(".backbutton"),o=document.getElementById("welcomeText"),r=document.querySelector(".book"),n=document.getElementById("coverText");setTimeout(async()=>{l(n)},1e3),setTimeout(async()=>{l(t)},2e3),o&&l(o),t&&t.addEventListener("pointerdown",B),e&&e.addEventListener("pointerdown",E),s&&s.addEventListener("pointerdown",S),sessionStorage.getItem("loggedIn")==="true"&&(D(),cover.style.transition="transform 0s",login.style.transition="transform 0s",register.style.transition="transform 0s",userPage.style.transition="transform 0s",r.style.zIndex=4,r.style.transition="transform 0s ease, top 0s ease, left 0s ease"),document.querySelectorAll(".tab").forEach(i=>{i.addEventListener("click",c=>{if(sessionStorage.getItem("loggedIn")==="true"){const m=c.currentTarget.parentElement.id;k(m)}else alert("You need to be logged in to access this page.")})})});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".tab").forEach(e=>{e.addEventListener("click",s=>{if(sessionStorage.getItem("loggedIn")==="true"){const o=s.currentTarget.parentElement.id;k(o)}else alert("You need to be logged in to access this page.")})})});async function b(){try{const t=await fetch("https://seerstoneapi.onrender.com/quotes/");if(!t.ok)throw new Error("Network response was not ok "+t.statusText);const e=await t.json(),s=Math.floor(Math.random()*e.length),o=e[s],r=document.querySelector(".quotes"),n=document.querySelector(".quoteText");d(n),r&&setTimeout(async()=>{n.innerHTML=`
        <p>"${o.text}" - ${o.person}</p>
      `,l(n)},1e3),console.log(o)}catch(t){console.error("Failed to fetch the quotes:",t)}}function R(){b(),setInterval(b,10*60*1e3)}R();function T(t,e,s){return new Promise(o=>{setTimeout(()=>{t.innerHTML+="<br>",f(t,e),o()},s)})}function f(t,e,s=400){let o=0;function r(){const n=document.createElement("span");n.textContent=e[o],n.style.transition=`opacity ${s/2}ms ease-in-out`,n.style.opacity=1,t.appendChild(n),o++,o<e.length&&setTimeout(()=>{requestAnimationFrame(r)},s/e.length)}requestAnimationFrame(r)}function _(){const t=document.querySelector(".feather"),e=document.querySelector(".feathershadow");e.style.animation="none",e.style.transition="opacity 1s ease",e.style.opacity="0",setTimeout(()=>{t.style.transition="transform 0.2s ease, left 0.2s ease, top 0.2s ease",t.style.transform="rotateY(-40deg) scaleX(.5) scale(1.5)"},0),setTimeout(()=>{t.style.transition="transform 0.2s ease, left 0.2s ease, top 0.2s ease",t.style.transform="rotateY(-40deg) scaleX(0.5) scale(1.5)",t.style.left="230px",t.style.top="78px"},0),setTimeout(()=>{t.style.transition="transform 0.2s ease, left 0.2s ease, top 0.2s ease",t.style.transform="rotateY(-50deg) scaleX(0.5) scale(1.3)",t.style.left="200px",t.style.top="55px"},450),setTimeout(()=>{t.style.transition="transform 0.2s ease, left 0.2s ease, top 0.2s ease",t.style.transform="rotateY(-40deg) scaleX(0.5) scale(1.5)",t.style.left="230px",t.style.top="78px"},900)}function Y(){const t=document.querySelector(".feather"),e=document.querySelector(".feathershadow");setTimeout(()=>{t.style.transition="transform 0.2s ease, left 0.2s ease, top 0.2s ease",t.style.transform="rotateY(0deg) scaleX(1) scale(1)",t.style.left="20px",t.style.top="-20px"},0),setTimeout(()=>{e.style.opacity="2"},200),setTimeout(()=>{e.style.animation="item-flicker .15s infinite alternate"},200)}function I(t){const e=document.querySelector(".feather");e.style.top=`${t}px`,e.style.transition="transform 0.2s ease, left 0.2s ease, top 0.2s ease",e.style.transform="rotateY(30deg) scaleX(0.5) scale(1.5)",e.style.left="-20px"}function w(t,e,s){const o=document.querySelector(".feather");G(e),setTimeout(()=>{o.style.transition=`transform ${t} ease, left ${t} linear, top ${t} linear`,o.style.transform="rotateY(30deg) scaleX(0.5) scale(1.5)",o.style.left="-20px",o.style.top=`${s}px`},2500)}function G(t){const e=document.querySelector(".feather"),s=t,o=[];let r=0;for(let n=1;n<=10;n++){r+=s;const i=`rotate(${(n%2===0?-1:1)*5}deg) rotateY(30deg) translateX(${r}px) scaleX(0.5) scale(1.3)`;o.push({transform:i})}o.push({transform:`rotate(0deg) rotateY(33deg) translateX(${t}px) translateY(-20px) scaleX(0.7) scale(1.5)`}),o.forEach((n,a)=>{setTimeout(()=>{e.style.transition="transform 0.2s ease",e.style.transform=n.transform},a*50)})}document.getElementById("registerForm").addEventListener("submit",async function(t){t.preventDefault();const e=document.getElementById("newUsername").value,s=document.getElementById("newPassword").value,o=document.getElementById("firstName").value,r=document.getElementById("lastName").value,n=document.getElementById("email").value;await J(e,s,o,r,n)});async function J(t,e,s,o,r){const n={username:t,password:e,first_name:s,last_name:o,email:r};try{const a=await fetch("https://seerstoneapi.onrender.com/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!a.ok){const m=await a.text();throw new Error(`Registration failed: ${m}`)}const i=await a.json();console.log("User registered successfully:",i);const c=document.querySelector(".paperMessage");w(),c.innerHTML="",setTimeout(async()=>{await f(c,`${t} registered!`),await T(c," You can now log in!",2e3),S()},2e3)}catch(a){console.error("Error registering user:",a)}}async function Q(t,e){const s={username:t,password:e};try{const o=await fetch("https://seerstoneapi.onrender.com/users/login",{method:"POST",headers:{"Content-Type":"application/json",credentials:"include"},body:JSON.stringify(s)});if(o.status===404)throw new Error("User not found");if(!o.ok)throw new Error("Login failed");const r=await o.json();if(r.user.user_id&&r.user.username){console.log("User logged in successfully:",r),sessionStorage.setItem("loggedIn","true"),sessionStorage.setItem("userId",r.user.user_id),sessionStorage.setItem("username",r.user.username),v(),x(),A(),_(),setTimeout(()=>I(100),900),setTimeout(()=>w("0.02s",15,0),1900),setTimeout(()=>I(160),2500),setTimeout(()=>w("0.02s",25,0),3500),setTimeout(()=>I(0),4100),setTimeout(()=>Y(),5e3),setTimeout(()=>j(),5500),$(),setTimeout(q,2500);const n=document.getElementById("logoutButton");setTimeout(()=>l(n),3e3);const a=document.querySelector(".paperMessage");a.innerHTML="",setTimeout(async()=>{await f(a,`${r.user.username}`,1e3),await T(a,"logged in successfully!",1500),setTimeout(()=>d(document.querySelector(".paperMessage")),2500),setTimeout(B,3e3),setTimeout(E,3500),setTimeout(P,4e3),setTimeout(W,4500),setTimeout(async()=>{book.style.transition="transform 0s ease, top 0s ease, left 0s ease"},5e3)},2e3)}else throw new Error("User not found in the database")}catch(o){console.error("Error logging in:",o),sessionStorage.setItem("username",""),sessionStorage.setItem("userId",""),sessionStorage.setItem("loggedIn","false");const r=document.querySelector(".paperMessage");r.innerHTML="",setTimeout(async()=>{await f(r,"Login Error",500),await T(r," Incorrect information",1e3)},2e3)}}async function K(t){t.preventDefault();const e=document.getElementById("username").value,s=document.getElementById("password").value;try{await Q(e,s)}catch(o){console.error("Error logging in:",o);const r=document.querySelector(".paper"),n=document.createElement("p");n.textContent="Please check your username and password, and then try again!",n.className="userNotFound",r.append(n)}}document.getElementById("loginForm").addEventListener("submit",K);function Z(){if(sessionStorage.getItem("loggedIn")==="true"){sessionStorage.setItem("loggedIn","false"),sessionStorage.setItem("username",""),sessionStorage.setItem("userId",""),Y(),setTimeout(()=>{N()},500),setTimeout(U,0),setTimeout(H,500),setTimeout(S,1e3),setTimeout(x,1500),setTimeout(v,2e3);const t=document.querySelector(".paperMessage");t&&(d(t),setTimeout(()=>{t.textContent="Good Bye",l(t)},500)),setTimeout(()=>{window.location.href="index.html"},3500)}}document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("logoutButton");t&&t.addEventListener("click",Z)});function ee(){sessionStorage.getItem("loggedIn")==="true"&&setTimeout(()=>{q(),setTimeout(()=>l(logoutButton),4e3),v()},500)}document.addEventListener("DOMContentLoaded",ee);
